# Paket Detection

## Requirements

Paket Detection depends on the following to successfully run:

- One or more `paket.lock` files.
- The Paket detector looks for [`paket.lock`][1] files.

[1]: https://github.com/microsoft/component-detection/blob/main/src/Microsoft.ComponentDetection.Detectors/paket/PaketComponentDetector.cs

## Detection Strategy

Paket Detection is performed by parsing any `paket.lock` files found under the scan directory.

The `paket.lock` file is a lock file that records the concrete dependency resolution of all direct and transitive dependencies of your project. It is generated by [Paket][2], an alternative dependency manager for .NET that is popular in both large-scale C# projects and small-scale F# projects.

[2]: https://fsprojects.github.io/Paket/

## What is Paket?

Paket is a dependency manager for .NET and Mono projects that provides:
- Precise control over package dependencies
- Reproducible builds through lock files
- Support for multiple package sources (NuGet, GitHub, HTTP, Git)
- Better resolution algorithm compared to legacy NuGet

The `paket.lock` file structure is straightforward and human-readable:
```
NUGET
  remote: https://api.nuget.org/v3/index.json
    PackageName (1.0.0)
      DependencyName (>= 2.0.0)
```

## Paket Detector

The Paket detector parses `paket.lock` files to extract:
- Package names and versions
- Direct dependencies (packages explicitly listed)
- Transitive dependencies (dependencies of dependencies)
- Dependency relationships between packages

Currently, the detector focuses on the `NUGET` section of the lock file, which contains NuGet package dependencies. Other dependency types (GITHUB, HTTP, GIT) are not currently supported.

## How It Works

The detector:
1. Locates `paket.lock` files in the scan directory
2. Parses the file line by line
3. Identifies packages (4-space indentation) and their versions
4. Identifies dependencies (6-space indentation) and their version constraints
5. Records all packages as NuGet components
6. Establishes parent-child relationships between packages and their dependencies

## Known Limitations

- Only NuGet dependencies from the `NUGET` section are detected
- GitHub, HTTP, and Git dependencies are not currently supported
- The detector assumes the lock file format follows the standard Paket conventions
